@using RazorKick.Components.Account
@using Domain.Enums.Identity
@using Application.Constants.Identity

@attribute [Route(AppRouteConstants.Account.Themes)]
@attribute [Authorize(PermissionConstants.Preferences.ChangeTheme)]

<MudContainer Class="d-flex pa-4 flex-column align-center">
    <AccountSettingsNavBar/>
</MudContainer>

<MudContainer Class="d-flex pa-4 flex-column align-center">
    <MudButtonGroup Color="Color.Secondary" Variant="Variant.Outlined">
        <MudButton OnClick="@(() => UpdateEditingThemeValues())">
            Custom One
        </MudButton>
        <MudButton OnClick="@(() => UpdateEditingThemeValues(AppThemeId.CustomTwo))">
            Custom Two
        </MudButton>
        <MudButton OnClick="@(() => UpdateEditingThemeValues(AppThemeId.CustomThree))">
            Custom Three
        </MudButton>
    </MudButtonGroup>
</MudContainer>

<MudContainer MaxWidth="MaxWidth.Medium">
    <MudGrid Class="pa-2 justify-center my-2 mud-text-align-center">
        <MudItem xs="12" sm="12" md="12" Class="px-4">
            <MudAlert ContentAlignment="HorizontalAlignment.Center" Severity="Severity.Info">
                Preferred/Default theme is automatically saved when you change your theme from the settings menu
            </MudAlert>
        </MudItem>
        <MudPaper Width="97.5%" Class="d-flex pa-4 flex-wrap">
            <MudItem xs="12" sm="12" md="12" Class="d-flex flex-column align-center">
                <MudChip Color="Color.Primary">Currently Editing Theme: @_editingTheme.ThemeName</MudChip>
            </MudItem>
            <MudItem xs="12" sm="12" md="12" Class="d-flex flex-wrap pa-2 gap-4">
                <MudTextField Variant="Variant.Outlined" T="string" @bind-Text="_editingTheme.ThemeName" Label="Theme Name"/>
                <MudTextField Variant="Variant.Outlined" T="string" @bind-Text="_editingTheme.ThemeDescription" Label="Theme Description"/>
            </MudItem>
            <MudItem xs="12" sm="12" md="12" Class="d-flex flex-wrap pa-2 gap-4">
                <MudColorPicker Label="Primary Color" Elevation="12" DisableToolbar="false" DisableDragEffect="true"
                                @bind-Text="_editingTheme.ColorPrimary" Variant="Variant.Outlined" @bind-Value="_editThemePrimaryColor"
                                Style="@($".mud-icon-root.mud-svg-icon fill: {_editingTheme.ColorPrimary} !important;")"/>
                <MudIcon Icon="@Icons.Material.Rounded.Square" Size="Size.Large" Style="@($"color: {_editingTheme.ColorPrimary};")" Class="align-center justify-center"/>
                <MudColorPicker Label="Secondary Color" Elevation="12" DisableToolbar="false" DisableDragEffect="true"
                                @bind-Text="_editingTheme.ColorSecondary" Variant="Variant.Outlined" @bind-Value="_editThemeSecondaryColor"
                                Style="@($".mud-icon-root.mud-svg-icon.fill: {_editingTheme.ColorSecondary} !important;")"/>
                <MudIcon Icon="@Icons.Material.Rounded.Square" Size="Size.Medium" Style="@($"color: {_editingTheme.ColorSecondary};")" Class="align-center"/>
            </MudItem>
            <MudItem xs="12" sm="12" md="12" Class="d-flex flex-wrap pa-2 gap-4">
                <MudColorPicker Label="Tertiary Color" Elevation="12" DisableToolbar="false" DisableDragEffect="true"
                                @bind-Text="_editingTheme.ColorTertiary" Variant="Variant.Outlined" @bind-Value="_editThemeTertiaryColor"
                                Style="@($"fill: {_editingTheme.ColorTertiary};")"/>
                <MudColorPicker Label="Background Color" Elevation="12" DisableToolbar="false" DisableDragEffect="true"
                                @bind-Text="_editingTheme.ColorBackground" Variant="Variant.Outlined" @bind-Value="_editThemeBackgroundColor"
                                Style="@($"fill: {_editingTheme.ColorBackground} !important;")"/>
            </MudItem>
            <MudItem xs="12" sm="12" md="12" Class="d-flex flex-wrap pa-2 gap-4">
                <MudColorPicker Label="TitleBar Color" Elevation="12" DisableToolbar="false" DisableDragEffect="true"
                                @bind-Text="_editingTheme.ColorTitleBar" Variant="Variant.Outlined" @bind-Value="_editThemeTitleBarColor"
                                Style="@($"color: {_editingTheme.ColorTitleBar};")"/>
                <MudColorPicker Label="Navigation Bar Color" Elevation="12" DisableToolbar="false" DisableDragEffect="true"
                                @bind-Text="_editingTheme.ColorNavBar" Variant="Variant.Outlined" @bind-Value="_editThemeNavBarColor"
                                Style="@($"color: {_editingTheme.ColorNavBar};")"/>
            </MudItem>
            <MudItem xs="12" sm="12" md="12" Class="d-flex flex-wrap pa-2 gap-4">
                <MudColorPicker Label="Success Color" Elevation="12" DisableToolbar="false" DisableDragEffect="true"
                                @bind-Text="_editingTheme.ColorSuccess" Variant="Variant.Outlined" @bind-Value="_editThemeSuccessColor"
                                Style="@($"color: {_editingTheme.ColorSuccess};")"/>
                <MudColorPicker Label="Error Color" Elevation="12" DisableToolbar="false" DisableDragEffect="true"
                                @bind-Text="_editingTheme.ColorError" Variant="Variant.Outlined" @bind-Value="_editThemeErrorColor"
                                Style="@($"color: {_editingTheme.ColorError};")"/>
            </MudItem>
            <MudItem xs="12" sm="12" md="12" Class="d-flex flex-wrap pa-2 gap-6 justify-center align-center">
                <MudButton Variant="Variant.Outlined" Color="Color.Error" EndIcon="@Icons.Material.Filled.Delete"
                           OnClick="@ResetSelectedThemeToDefault">
                    Reset Theme to Default
                </MudButton>
                <MudButton Variant="Variant.Outlined" Color="Color.Secondary" EndIcon="@Icons.Material.Filled.Save"
                           OnClick="@SavePreferences">
                    Save Themes
                </MudButton>
            </MudItem>
        </MudPaper>
    </MudGrid>
</MudContainer>

<MudContainer Fixed="false" Class="pa-4 z-0" MaxWidth="MaxWidth.Medium" Style="position: relative; max-height: 850px;">
    <MudItem xs="12" sm="12" md="12" Class="d-flex flex-column align-center pa-2">
        <MudChip Color="Color.Primary">Editing Theme Preview</MudChip>
    </MudItem>
    <MudAppBar Class="z-0" Fixed="false" Style="@($"color: {_editingTheme.ColorPrimary}; background-color: {_editingTheme.ColorTitleBar}; max-height: 250px;")">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@DemoToggleDrawer"/>
        <MudSpacer/>
        <MudIconButton Icon="@Icons.Material.Filled.Settings" Color="Color.Inherit"/>
    </MudAppBar>
    <MudContainer Class="pb-4">
        <MudDrawerContainer Class="d-flex">
            <MudDrawer Class="ml-4" @bind-Open="@_demoOpen" Fixed="false" Elevation="1" Variant="@DrawerVariant.Mini" OpenMiniOnHover="true"
                       Style="@($"background-color: {_editingTheme.ColorNavBar};")">
                <MudNavMenu>
                    <MudNavLink Icon="@Icons.Material.Filled.Home">
                        <MudText Typo="Typo.caption" Style="@($"color: {_editingTheme.ColorPrimary};")">Example 1</MudText>
                    </MudNavLink>
                    <MudNavLink Icon="@Icons.Material.Filled.Person">
                        <MudText Typo="Typo.caption" Style="@($"color: {_editingTheme.ColorPrimary};")">Example 2</MudText>
                    </MudNavLink>
                    <MudNavLink Icon="@Icons.Material.Filled.People">
                        <MudText Typo="Typo.caption" Style="@($"color: {_editingTheme.ColorPrimary};")">Example 3</MudText>
                    </MudNavLink>
                </MudNavMenu>
            </MudDrawer>
        </MudDrawerContainer>
        <MudGrid Class="d-flex mx-4 pl-4" Style="@($"background-color: {_editingTheme.ColorBackground};")">
            <MudItem sm="12" md="12" xs="12" lg="12">
                <MudAlert Severity="Severity.Normal" Dense="true" Class="my-2" Style="@($"color: {_editingTheme.ColorPrimary};")">Normal Message</MudAlert>
                <MudAlert Severity="Severity.Info" Dense="true" Class="my-2" Style="@($"color: {_editingTheme.ColorSecondary};")">Info Message</MudAlert>
                <MudAlert Severity="Severity.Warning" Dense="true" Class="my-2" Style="@($"color: {_editingTheme.ColorTertiary};")">Warning Message</MudAlert>
            </MudItem>
            <MudItem sm="12" md="12" xs="12" lg="12">
                <MudAlert Severity="Severity.Success" Dense="true" Class="my-2" Style="@($"color: {_editingTheme.ColorSuccess};")">Success Message</MudAlert>
                <MudAlert Severity="Severity.Error" Dense="true" Class="my-2" Style="@($"color: {_editingTheme.ColorError};")">Error Message</MudAlert>
            </MudItem>
            <MudItem sm="12" md="12" xs="12" lg="12">
                <MudButton Variant="Variant.Outlined" EndIcon="@Icons.Material.Filled.Save"
                           Style="@($"color: {_editingTheme.ColorSecondary}; border-color: {_editingTheme.ColorSecondary};")">
                    Save Example
                </MudButton>
                <MudButton Variant="Variant.Outlined" EndIcon="@Icons.Material.Filled.Delete"
                           Style="@($"color: {_editingTheme.ColorError}; border-color: {_editingTheme.ColorError};")">
                    Delete Example
                </MudButton>
            </MudItem>
            <MudItem sm="12" md="12" xs="12" lg="12">
                <MudButton Variant="Variant.Outlined" EndIcon="@Icons.Material.Filled.Add"
                           Style="@($"color: {_editingTheme.ColorSuccess}; border-color: {_editingTheme.ColorSuccess};")">
                    Add Example
                </MudButton>
                <MudButton Variant="Variant.Outlined" EndIcon="@Icons.Material.Filled.FileDownload"
                           Style="@($"color: {_editingTheme.ColorTertiary}; border-color: {_editingTheme.ColorTertiary};")">
                    Download Example
                </MudButton>
            </MudItem>
            <MudItem sm="12" md="12" xs="12" lg="12">
                <MudCheckBox Label="Check. Box. Gonna. Get. Ya." Checked="true" Style="@($"color: {_editingTheme.ColorPrimary};")"/>
                <MudChip Text="I ain't ever gonna give you up" Style="@($"background-color: {_editingTheme.ColorPrimary};")"/>
                <MudChip Text="let you down, run around" Style="@($"background-color: {_editingTheme.ColorSecondary};")"/>
                <MudChip Text="or desert you" Style="@($"background-color: {_editingTheme.ColorTertiary};")"/>
            </MudItem>
            <MudItem sm="12" md="12" xs="12" lg="12">
                <MudExpansionPanel Text="Expand!" MaxHeight="150" Style="@($"background-color: {_editingTheme.ColorBackground};")">
                    Expanding is
                    <MudButton Variant="Variant.Text" DisableElevation="true" Style="@($"color: {_editingTheme.ColorPrimary};")">
                        Growing!
                    </MudButton>
                </MudExpansionPanel>
            </MudItem>
        </MudGrid>
    </MudContainer>
</MudContainer>
