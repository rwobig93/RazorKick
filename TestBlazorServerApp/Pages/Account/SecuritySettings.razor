@using TestBlazorServerApp.Components.Account

@attribute [Route(AppRouteConstants.Account.Security)]

<MudContainer Class="d-flex pa-4 flex-column align-center">
    <AccountSettingsNavBar/>
</MudContainer>

<MudContainer>
    <MudGrid Class="pa-4 justify-center my-4 mud-text-align-center">
        <MudPaper Width="98%" Class="pa-4 mb-3">
            <MudItem xs="12" sm="12" md="12" lg="18" xl="24" xxl="36" Class="pa-2">
                <MudText Color="Color.Primary" Align="Align.Center" Typo="Typo.h5">Change Password</MudText>
            </MudItem>
            <MudItem xs="12" sm="12" md="12" Class="d-flex justify-center pa-2">
                <MudTextField @bind-Value="CurrentPassword" Label="Current Password" Variant="Variant.Outlined" InputType="@_passwordCurrentInput"
                              Adornment="Adornment.End" AdornmentIcon="@_passwordCurrentInputIcon" OnAdornmentClick="@ToggleCurrentPasswordVisibility"
                              AdornmentAriaLabel="Show Current Password"/>
            </MudItem>
            <MudItem xs="12" sm="12" md="12" Class="d-flex justify-center pa-2">
                <MudTextField @bind-Value="DesiredPassword" Label="Desired Password" Variant="Variant.Outlined" InputType="@_passwordInput"
                              Adornment="Adornment.End" AdornmentIcon="@_passwordInputIcon" OnAdornmentClick="@TogglePasswordVisibility"
                              AdornmentAriaLabel="Show Desired Password"/>
                @* TODO: Add realtime feedback on password meeting requirements *@
                <MudMenu Icon="@Icons.Filled.QuestionMark" Color="Color.Inherit" Dense="true" Direction="Direction.Left" Size="Size.Medium">
                    <MudText Align="Align.Left" Class="mx-4">Minimum Length:     @_passwordRequirements.MinimumLength</MudText>
                    <MudText Align="Align.Left" Class="mx-4">Requires Special:   @_passwordRequirements.RequiresSpecialCharacters</MudText>
                    <MudText Align="Align.Left" Class="mx-4">Requires Lowercase: @_passwordRequirements.RequiresLowercase</MudText>
                    <MudText Align="Align.Left" Class="mx-4">Requires Uppercase: @_passwordRequirements.RequiresUppercase</MudText>
                    <MudText Align="Align.Left" Class="mx-4">Requires Numbers:   @_passwordRequirements.RequiresNumbers</MudText>
                </MudMenu>
            </MudItem>
            <MudItem xs="12" sm="12" md="12" Class="d-flex justify-center pa-2">
                <MudTextField @bind-Value="ConfirmPassword" Label="Confirm Password" Variant="Variant.Outlined" InputType="@_passwordConfirmInput"
                              Adornment="Adornment.End" AdornmentIcon="@_passwordConfirmInputIcon" OnAdornmentClick="@ToggleConfirmPasswordVisibility"
                              AdornmentAriaLabel="Show Confirm Password"/>
            </MudItem>
            <MudItem xs="12" sm="12" md="12" Class="d-flex justify-center pa-4">
                <MudButton Variant="Variant.Outlined" Color="Color.Secondary" StartIcon="@Icons.Material.Filled.Save" 
                           OnClick="@UpdatePassword">Change Password
                </MudButton>
            </MudItem>
        </MudPaper>
    </MudGrid>
</MudContainer>
