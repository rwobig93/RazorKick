@using Application.Constants.Identity

@attribute [Authorize(PermissionConstants.Users.Edit)]

<MudDialog Class="d-flex flex-column pa-4 justify-center my-4 mud-text-align-center">
    <DialogContent>
        <MudTabs>
            @if (_canRemoveRoles)
            {
                <MudTabPanel Text="Assigned">
                    <MudTable Items="@_assignedRoles" Hover="true" Dense="true" Striped="true" @bind-SelectedItems="_removeRoles" Class="d-flex flex-wrap">
                        <ToolBarContent>
                            <MudText Typo="Typo.h6">Assigned Roles</MudText>
                            <MudSpacer/>
                            @* TODO: More space in front of buttons, can't select roles *@
                            <MudButton Variant="Variant.Outlined" StartIcon="@Icons.Material.Filled.Remove" OnClick="RemoveRoles">Remove</MudButton>
                        </ToolBarContent>
                        <HeaderContent>
                            <MudTh></MudTh>
                            <MudTh>Name</MudTh>
                            <MudTh>Description</MudTh>
                        </HeaderContent>
                        <RowTemplate>
                            <MudTd DataLabel="Icon"><MudIcon Color="Color.Secondary" Icon="@Icons.Material.Filled.PermContactCalendar"/></MudTd>
                            <MudTd DataLabel="Name">@context.Name</MudTd>
                            <MudTd DataLabel="Description">@context.Description</MudTd>
                        </RowTemplate>
                    </MudTable>
                </MudTabPanel>
            }
            @if (_canAddRoles)
            {
                <MudTabPanel Text="Available">
                    <MudTable Items="@_availableRoles" Hover="true" Dense="true" Striped="true" @bind-SelectedItems="_addRoles" Class="d-flex flex-wrap">
                        <ToolBarContent>
                            <MudText Typo="Typo.h6">Available Roles</MudText>
                            <MudSpacer/>
                            <MudButton Variant="Variant.Outlined" StartIcon="@Icons.Material.Filled.Add" OnClick="AddRoles">Add</MudButton>
                        </ToolBarContent>
                        <HeaderContent>
                            <MudTh></MudTh>
                            <MudTh>Name</MudTh>
                            <MudTh>Description</MudTh>
                        </HeaderContent>
                        <RowTemplate>
                            <MudTd DataLabel="Icon"><MudIcon Color="Color.Secondary" Icon="@Icons.Material.Filled.PermContactCalendar"/></MudTd>
                            <MudTd DataLabel="Name">@context.Name</MudTd>
                            <MudTd DataLabel="Description">@context.Description</MudTd>
                        </RowTemplate>
                    </MudTable>
                </MudTabPanel>
            }
        </MudTabs>
    </DialogContent>
    <DialogActions>
        <MudItem xs="12" sm="12" md="12" Class="d-flex justify-center">
            <MudButton Variant="Variant.Outlined" Color="Color.Warning" FullWidth="true" StartIcon="@Icons.Material.Filled.Cancel"
                       OnClick="Cancel">Cancel
            </MudButton>
        </MudItem>
        <MudItem xs="12" sm="12" md="12" Class="d-flex justify-center">
            <MudButton Variant="Variant.Outlined" Color="Color.Primary" FullWidth="true" StartIcon="@Icons.Material.Filled.Save" 
                       OnClick="Save">Save
            </MudButton>
        </MudItem>
    </DialogActions>
</MudDialog>
